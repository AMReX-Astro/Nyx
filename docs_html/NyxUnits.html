

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Units and Conventions &mdash; Nyx  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Inputs" href="NyxInputs.html" />
    <link rel="prev" title="Compiling Nyx with SUNDIALS 5" href="getting_started/NyxSundials.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Nyx
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Nyx basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="NyxPreface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxCitation.html">Citation</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxGettingStarted.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Units and Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxInputs.html">Inputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICs.html">Initial conditions</a></li>
<li class="toctree-l1"><a class="reference internal" href="Refinement.html">Refinement Criteria</a></li>
<li class="toctree-l1"><a class="reference internal" href="ManagingGridHierarchy_Chapter.html">Gridding and Load Balancing</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxGravity.html">Gravity</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxEquations.html">Hydrodynamic Equations in Comoving Coordinates</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxSplitting.html">Hydrodynamical and Heating-Cooling Splitting</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxHeatCool.html">Radiative Heating and Cooling</a></li>
<li class="toctree-l1"><a class="reference internal" href="NyxForcing.html">Stochastic Forcing</a></li>
<li class="toctree-l1"><a class="reference internal" href="Particles.html">Dark matter particles</a></li>
<li class="toctree-l1"><a class="reference internal" href="InSitu.html">In situ Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="PostProcessing.html">Analyzing Outputs</a></li>
<li class="toctree-l1"><a class="reference internal" href="NightlyTests.html">Nightly Regression Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="Debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Development.html">Work in Progress</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nyx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Units and Conventions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/NyxUnits.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="units-and-conventions">
<h1>Units and Conventions<a class="headerlink" href="#units-and-conventions" title="Permalink to this headline">¶</a></h1>
<p>Nyx uses a cosmological system of units based on Mpc, M<span class="math notranslate nohighlight">\(_\odot\)</span>, and km/s for length, mass, and velocity,
respectively.  Temperature is given in degrees Kelvin.  The unit of time is derived from velocity and length units.
All inputs and problem initialization should be specified consistently with these units,
and the outputs should be interpreted with these units in mind.
In the equation of state calls, there is an internal
conversion between cosmological and CGS units.</p>
<p><a class="reference internal" href="#table-units"><span class="std std-numref">Table 2</span></a> shows
some of the common symbols / names used throughout the code documentation and papers.</p>
<span id="table-units"></span><table border="1" class="docutils" id="id1">
<caption><span class="caption-number">Table 2 </span><span class="caption-text">Common quantities and units.</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="23%" />
<col width="55%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">name</th>
<th class="head">units</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><span class="math notranslate nohighlight">\(t\)</span></td>
<td>(Mpc/km) s</td>
<td>time</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(\rho\)</span></td>
<td>M<span class="math notranslate nohighlight">\(_\odot\)</span> / Mpc<span class="math notranslate nohighlight">\(^3\)</span></td>
<td>mass density</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(\ub\)</span></td>
<td>km/s</td>
<td>velocity vector</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(p\)</span></td>
<td>M<span class="math notranslate nohighlight">\(_\odot\)</span> (km/s)<span class="math notranslate nohighlight">\(^2\)</span> / Mpc<span class="math notranslate nohighlight">\(^3\)</span></td>
<td>pressure</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(\gb\)</span></td>
<td>(km/s)2 / Mpc</td>
<td>gravitational
acceleration</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(E\)</span></td>
<td>(km/s)<span class="math notranslate nohighlight">\(^2\)</span></td>
<td>specific total energy</td>
</tr>
<tr class="row-even"><td><span class="math notranslate nohighlight">\(e\)</span></td>
<td>(km/s)<span class="math notranslate nohighlight">\(^2\)</span></td>
<td>specific internal
energy</td>
</tr>
<tr class="row-odd"><td><span class="math notranslate nohighlight">\(T\)</span></td>
<td><span class="math notranslate nohighlight">\(K\)</span></td>
<td>temperature</td>
</tr>
</tbody>
</table>
<p>In <a class="reference internal" href="#table-constants"><span class="std std-numref">Table 3</span></a> we list the values used for physical constants in cosmological units.
Note that <span class="math notranslate nohighlight">\(\Omega_m\)</span>, <span class="math notranslate nohighlight">\(\Omega_b\)</span>, <span class="math notranslate nohighlight">\(\Omega_r\)</span>  and <span class="math notranslate nohighlight">\(h\)</span> are set in the inputs file <a class="reference internal" href="NyxInputs.html#list-of-parameters-13"><span class="std std-ref">Comoving: List of Parameters</span></a>.
Full list of constants and conversion factors is set in Source/Driver/constants_cosmo.H.</p>
<span id="table-constants"></span><table border="1" class="docutils" id="id2">
<caption><span class="caption-number">Table 3 </span><span class="caption-text">Physical constant values</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Constant</th>
<th class="head">Cosmological units</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Gravitational constant (<span class="math notranslate nohighlight">\(G\)</span>)</td>
<td>4.3019425e-9 Mpc (km/s)<span class="math notranslate nohighlight">\(^2\)</span> M<span class="math notranslate nohighlight">\(_\odot^{-1}\)</span></td>
</tr>
<tr class="row-odd"><td>Avogadro’s number (<span class="math notranslate nohighlight">\(n_A\)</span>)</td>
<td>1.1977558e57 M<span class="math notranslate nohighlight">\(_\odot^{-1}\)</span></td>
</tr>
<tr class="row-even"><td>Boltzmann’s constant (<span class="math notranslate nohighlight">\(k_B\)</span>)</td>
<td>0.6941701e-59 M<span class="math notranslate nohighlight">\(_\odot\)</span> (km/s)<span class="math notranslate nohighlight">\(^2\)</span> / K</td>
</tr>
<tr class="row-odd"><td>Hubble constant (<span class="math notranslate nohighlight">\(H\)</span>)</td>
<td>100 (km/s) / Mpc</td>
</tr>
</tbody>
</table>
<p>The only other place that dimensional numbers are used in the code is in the tracing and Riemann solve.
We set three <em>small</em> numbers which need to be consistent with the data specified
We set one <em>large</em> number which needs to be consistent with the data specified.
Each of these can be specified in the inputs file.</p>
<ul class="simple">
<li>small_dens – small value for density</li>
<li>small_press – small value for pressure</li>
<li>small_temp – small value for temperature</li>
<li>large_temp – large value for temperature</li>
</ul>
<p>These are the places that each is used in the code:</p>
<ul>
<li><p class="first"><strong>small_dens</strong></p>
<ul>
<li><div class="first line-block">
<div class="line"><strong>enforce_minimum_density</strong> (called after subroutine consup) – there are two choices for this. In the flooring routine,</div>
<div class="line"><strong>enforce_minimum_density_floor</strong> – density is set to small_dens, (rho e) and (rho E) are computed from small_temp,</div>
<div class="line">and momenta are set to zero.  In the conservative routine, <strong>enforce_minimum_density_cons</strong>, an iterative procedure</div>
<div class="line">is used to create diffusive fluxes that adjusts all the variables conservatively until density is greater than small_dens.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><strong>tracexy / tracez / tracexy_ppm / tracez_ppm</strong>:</div>
<div class="line">qxp = max(qxp,small_dens)</div>
<div class="line">qxm = max(qxm,small_dens)</div>
<div class="line">and analogously for qyp/qym and qzp/qzm. This modifies the primitive density and pressure inside the tracing, not the underlying state variables</div>
</div>
</li>
<li><p class="first"><strong>riemannus</strong> – we set</p>
<p>wsmall = small_dens * csmall</p>
<p>and then</p>
<div class="line-block">
<div class="line">wl = max(wsmall, sqrt(gaml * pl * rl))</div>
<div class="line">wr = max(wsmall, sqrt(gamr * pr * rr))</div>
</div>
<p>Also, we set</p>
<p>ro = max(small_dens,ro)</p>
<p>where ro = 0.5 * (rl + rr) – this state is only chosen when ustar = 0, and</p>
<p>rstar = max(small_dens,rstar)</p>
<p>where rstar = ro + (pstar-po)/co:math:<cite>^2</cite></p>
</li>
</ul>
</li>
<li><p class="first"><strong>small_temp</strong>:</p>
<ul>
<li><div class="first line-block">
<div class="line"><strong>compute_new_temp</strong>: if <span class="math notranslate nohighlight">\(\rho e &lt; 0\)</span>, then</div>
<div class="line">call nyx_eos_given_RT (e,…,small_temp,…) in order to compute a new energy, <span class="math notranslate nohighlight">\(e\)</span>.</div>
<div class="line">This energy is then used to define a new <span class="math notranslate nohighlight">\(E = e + ke\)</span></div>
<div class="line">Coming out of this the temperature is equal to small_temp and the energy <span class="math notranslate nohighlight">\(e\)</span> has been reset.</div>
</div>
</li>
<li><div class="first line-block">
<div class="line"><strong>reset_internal_energy</strong>: if <span class="math notranslate nohighlight">\(e &lt; 0\)</span> and <span class="math notranslate nohighlight">\(E - ke &lt; 0\)</span> then</div>
<div class="line">call nyx_eos_given_RT (e,…,small_temp,…) in order to compute a new energy, <span class="math notranslate nohighlight">\(e\)</span>. This energy is also used to define a new <span class="math notranslate nohighlight">\(E = e + ke\)</span></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>large_temp</strong>:</p>
<ul>
<li><div class="first line-block">
<div class="line"><strong>compute_new_temp</strong>: if <span class="math notranslate nohighlight">\(T &gt; \mathrm{large\_temp}\)</span>, and the input flag <code class="docutils literal notranslate"><span class="pre">nyx.local_max_temp_dt=1</span></code> then</div>
<div class="line">set <span class="math notranslate nohighlight">\(T = \mathrm{large\_temp}\)</span> and call nyx_eos_given_RT (e,…,large_temp,…) in order to compute a new energy, <span class="math notranslate nohighlight">\(e\)</span>.</div>
<div class="line">This energy is then used to define a new <span class="math notranslate nohighlight">\(E = e + ke\)</span></div>
<div class="line">Coming out of this the temperature is equal to large_temp and the energy <span class="math notranslate nohighlight">\(e\)</span> has been reset.</div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>small_pres</strong>:</p>
<ul>
<li><div class="first line-block">
<div class="line"><strong>tracexy / tracez / tracexy_ppm / tracez_ppm</strong>:</div>
<div class="line">qpres = max(qpres,small_pres)</div>
<div class="line">for qxp/qyp, qyp/qym and qzp/qzm. This modifies the primitive density and pressure inside the tracing, not the underlying state variables</div>
</div>
</li>
<li><p class="first"><strong>riemannus</strong> – we set</p>
<div class="line-block">
<div class="line">pstar = max(small_pres,pstar)</div>
<div class="line">pgdnv = max(small_pres,pgdnv). Note that pgdnv is the pressure explicitly used in the fluxes.</div>
</div>
</li>
<li><p class="first"><strong>uflatten</strong> – small_pres is used to keep the denominator away from zero</p>
</li>
<li><p class="first">Everywhere we define values of pressure on a face, we set that value to be at least small_pres.</p>
</li>
</ul>
</li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="NyxInputs.html" class="btn btn-neutral float-right" title="Inputs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="getting_started/NyxSundials.html" class="btn btn-neutral float-left" title="Compiling Nyx with SUNDIALS 5" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Nyx development team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>